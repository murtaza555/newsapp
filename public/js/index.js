!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){var r;window,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t instanceof HTMLElement;if(!n&&"string"!=typeof t)throw new Error("{tag} is invalid value of tag");var r=n?t:document.createElement(t);for(var o in r.oldEventListener=r.addEventListener.bind(r),r.addEventListener=function(t,e,n){this.eventFunctions||(this.eventFunctions=[]),this.eventFunctions[this.eventFunctions.length]={type:t,listener:e,options:n},this.oldEventListener(t,e,n)}.bind(r),r.append=function(){for(var t=this,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return n.map((function(e){e instanceof Node&&(t.appendChild(e),e instanceof HTMLElement&&e.id&&(r[e.id]=e))})),this}.bind(r),r.get=function(t){return this.querySelector(t)}.bind(r),r.getAll=function(t){return this.querySelectorAll(t)}.bind(r),r.removeEvents=function(t){var e=this.eventFunctions;if(e)if(t){var n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;Array.isArray(t)&&t.indexOf(l.type)?this.removeEventListener(l.type,l.listener):"string"==typeof t&&l.type===t&&this.removeEventListener(l.type,l.listener)}}catch(t){o=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}}else{var c=!0,u=!1,d=void 0;try{for(var f,p=e[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var h=f.value;r.removeEventListener(h.type,h.listener)}}catch(t){u=!0,d=t}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}}.bind(r),r.destroy=function(){this.parentElement&&(this.removeEvents(),this.parentElement.removeChild(this),this.eventFunctions=null,r=null)}.bind(r),e)if(void 0!==e[o])if("child"===o){var i=e[o];r instanceof Node&&r.append(i)}else if("children"==o&&Array.isArray(e[o])){var a=e[o],s=!0,l=!1,c=void 0;try{for(var u,d=a[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value;r.append(f)}}catch(t){l=!0,c=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}}else if("attr"==o)for(var p in e[o])r.setAttribute(p,e[o][p]);else if("Object"===e[o].constructor.name)for(var h in e[o])r[o][h]=e[o][h];else r[o]=e[o];return r}n.r(e),n.d(e,"tag",(function(){return o})),o.get=function(t){var e=document.querySelector(t);return e?o(e):null},o.getAll=function(t){var e=r(document.querySelectorAll(t));return e.map((function(t){o(t)})),e},o.parse=function(t){var e=o("div");return e.innerHTML=t,1===e.childElementCount?o(e.firstElementChild):r(e.children)},o.template=function(t,e){if(e)for(var n in e)/^[a-z_][a-z0-9_\-]*$/.test(n)&&(t=t.replace(new RegExp("{{".concat(n,"}}"),"g"),e[n]));return t=t.replace(/{{[a-z_][a-z0-9_\-]*}}/g,"")}}]).tag},t.exports=r()},function(t,e,n){var r,o,i,a;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */a=function(t){var e=Object.prototype.toString,n=Array.isArray||function(t){return"[object Array]"===e.call(t)};function r(t){return"function"==typeof t}function o(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t,e){return null!=t&&"object"==typeof t&&e in t}var a=RegExp.prototype.test,s=/\S/;function l(t){return!function(t,e){return a.call(t,e)}(s,t)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},u=/\s*/,d=/\s+/,f=/\s*=/,p=/\s*\}/,h=/#|\^|\/|>|\{|&|=|!/;function v(t){this.string=t,this.tail=t,this.pos=0}function g(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function m(){this.cache={}}v.prototype.eos=function(){return""===this.tail},v.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},v.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},g.prototype.push=function(t){return new g(t,this)},g.prototype.lookup=function(t){var e,n,o,a=this.cache;if(a.hasOwnProperty(t))e=a[t];else{for(var s,l,c,u=this,d=!1;u;){if(t.indexOf(".")>0)for(s=u.view,l=t.split("."),c=0;null!=s&&c<l.length;)c===l.length-1&&(d=i(s,l[c])||(n=s,o=l[c],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(o))),s=s[l[c++]];else s=u.view[t],d=i(u.view,t);if(d){e=s;break}u=u.parent}a[t]=e}return r(e)&&(e=e.call(this.view)),e},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(e,r){var i=this.cache,a=e+":"+(r||t.tags).join(":"),s=i[a];return null==s&&(s=i[a]=function(e,r){if(!e)return[];var i,a,s,c=!1,g=[],m=[],y=[],b=!1,w=!1,x="",k=0;function _(){if(b&&!w)for(;y.length;)delete m[y.pop()];else y=[];b=!1,w=!1}function E(t){if("string"==typeof t&&(t=t.split(d,2)),!n(t)||2!==t.length)throw new Error("Invalid tags: "+t);i=new RegExp(o(t[0])+"\\s*"),a=new RegExp("\\s*"+o(t[1])),s=new RegExp("\\s*"+o("}"+t[1]))}E(r||t.tags);for(var L,C,T,A,S,j,O=new v(e);!O.eos();){if(L=O.pos,T=O.scanUntil(i))for(var N=0,M=T.length;N<M;++N)l(A=T.charAt(N))?(y.push(m.length),x+=A):(w=!0,c=!0,x+=" "),m.push(["text",A,L,L+1]),L+=1,"\n"===A&&(_(),x="",k=0,c=!1);if(!O.scan(i))break;if(b=!0,C=O.scan(h)||"name",O.scan(u),"="===C?(T=O.scanUntil(f),O.scan(f),O.scanUntil(a)):"{"===C?(T=O.scanUntil(s),O.scan(p),O.scanUntil(a),C="&"):T=O.scanUntil(a),!O.scan(a))throw new Error("Unclosed tag at "+O.pos);if(S=">"==C?[C,T,L,O.pos,x,k,c]:[C,T,L,O.pos],k++,m.push(S),"#"===C||"^"===C)g.push(S);else if("/"===C){if(!(j=g.pop()))throw new Error('Unopened section "'+T+'" at '+L);if(j[1]!==T)throw new Error('Unclosed section "'+j[1]+'" at '+L)}else"name"===C||"{"===C||"&"===C?w=!0:"="===C&&E(T)}if(_(),j=g.pop())throw new Error('Unclosed section "'+j[1]+'" at '+O.pos);return function(t){for(var e,n=[],r=n,o=[],i=0,a=t.length;i<a;++i)switch((e=t[i])[0]){case"#":case"^":r.push(e),o.push(e),r=e[4]=[];break;case"/":o.pop()[5]=e[2],r=o.length>0?o[o.length-1][4]:n;break;default:r.push(e)}return n}(function(t){for(var e,n,r=[],o=0,i=t.length;o<i;++o)(e=t[o])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}(m))}(e,r)),s},m.prototype.render=function(t,e,n,r){var o=this.parse(t,r),i=e instanceof g?e:new g(e);return this.renderTokens(o,i,n,t,r)},m.prototype.renderTokens=function(t,e,n,r,o){for(var i,a,s,l="",c=0,u=t.length;c<u;++c)s=void 0,"#"===(a=(i=t[c])[0])?s=this.renderSection(i,e,n,r):"^"===a?s=this.renderInverted(i,e,n,r):">"===a?s=this.renderPartial(i,e,n,o):"&"===a?s=this.unescapedValue(i,e):"name"===a?s=this.escapedValue(i,e):"text"===a&&(s=this.rawValue(i)),void 0!==s&&(l+=s);return l},m.prototype.renderSection=function(t,e,o,i){var a=this,s="",l=e.lookup(t[1]);if(l){if(n(l))for(var c=0,u=l.length;c<u;++c)s+=this.renderTokens(t[4],e.push(l[c]),o,i);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(t[4],e.push(l),o,i);else if(r(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(e.view,i.slice(t[3],t[5]),(function(t){return a.render(t,e,o)})))&&(s+=l)}else s+=this.renderTokens(t[4],e,o,i);return s}},m.prototype.renderInverted=function(t,e,r,o){var i=e.lookup(t[1]);if(!i||n(i)&&0===i.length)return this.renderTokens(t[4],e,r,o)},m.prototype.indentPartial=function(t,e,n){for(var r=e.replace(/[^ \t]/g,""),o=t.split("\n"),i=0;i<o.length;i++)o[i].length&&(i>0||!n)&&(o[i]=r+o[i]);return o.join("\n")},m.prototype.renderPartial=function(t,e,n,o){if(n){var i=r(n)?n(t[1]):n[t[1]];if(null!=i){var a=t[6],s=t[5],l=t[4],c=i;return 0==s&&l&&(c=this.indentPartial(i,l,a)),this.renderTokens(this.parse(c,o),e,n,c)}}},m.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},m.prototype.escapedValue=function(e,n){var r=n.lookup(e[1]);if(null!=r)return t.escape(r)},m.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="3.1.0",t.tags=["{{","}}"];var y=new m;return t.clearCache=function(){return y.clearCache()},t.parse=function(t,e){return y.parse(t,e)},t.render=function(t,e,r,o){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(n(i=t)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return y.render(t,e,r,o)},t.to_html=function(e,n,o,i){var a=t.render(e,n,o);if(!r(i))return a;i(a)},t.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return c[t]}))},t.Scanner=v,t.Context=g,t.Writer=m,t},e&&"string"!=typeof e.nodeName?a(e):(o=[e],void 0===(i="function"==typeof(r=a)?r.apply(e,o):r)||(t.exports=i))},function(t,e,n){var r,o,i;
/*!
	autosize 4.0.2
	license: MIT
	http://www.jacklmoore.com/autosize
*/o=[t,e],void 0===(i="function"==typeof(r=function(t,e){"use strict";var n,r,o="function"==typeof Map?new Map:(n=[],r=[],{has:function(t){return n.indexOf(t)>-1},get:function(t){return r[n.indexOf(t)]},set:function(t,e){-1===n.indexOf(t)&&(n.push(t),r.push(e))},delete:function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),r.splice(e,1))}}),i=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){i=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function a(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var e,n=null,r=null,a=null,s=function(){t.clientWidth!==r&&d()},l=function(e){window.removeEventListener("resize",s,!1),t.removeEventListener("input",d,!1),t.removeEventListener("keyup",d,!1),t.removeEventListener("autosize:destroy",l,!1),t.removeEventListener("autosize:update",d,!1),Object.keys(e).forEach((function(n){t.style[n]=e[n]})),o.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",l,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",d,!1),window.addEventListener("resize",s,!1),t.addEventListener("input",d,!1),t.addEventListener("autosize:update",d,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",o.set(t,{destroy:l,update:d}),"vertical"===(e=window.getComputedStyle(t,null)).resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),n="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(n)&&(n=0),d()}function c(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function u(){if(0!==t.scrollHeight){var e=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+n+"px",r=t.clientWidth,e.forEach((function(t){t.node.scrollTop=t.scrollTop})),o&&(document.documentElement.scrollTop=o)}}function d(){u();var e=Math.round(parseFloat(t.style.height)),n=window.getComputedStyle(t,null),r="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):t.offsetHeight;if(r<e?"hidden"===n.overflowY&&(c("scroll"),u(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==n.overflowY&&(c("hidden"),u(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),a!==r){a=r;var o=i("autosize:resized");try{t.dispatchEvent(o)}catch(t){}}}}function s(t){var e=o.get(t);e&&e.destroy()}function l(t){var e=o.get(t);e&&e.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(t){return t}).destroy=function(t){return t},c.update=function(t){return t}):((c=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],(function(t){return a(t)})),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t},c.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],l),t}),e.default=c,t.exports=e.default})?r.apply(e,o):r)||(t.exports=i)},function(t,e,n){
/*!
 * Compressor.js v1.0.6
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2019-11-23T04:43:12.442Z
 */
t.exports=function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(n){e(t,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var i=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){"undefined"!=typeof window&&function(e){var n=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,r=e.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),o=r&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,a=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(r||i)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(t){var e,n,s,l,c,u,d,f,p;if(!(e=t.match(a)))throw new Error("invalid data URI");for(n=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),s=!!e[4],l=t.slice(e[0].length),c=s?atob(l):decodeURIComponent(l),u=new ArrayBuffer(c.length),d=new Uint8Array(u),f=0;f<c.length;f+=1)d[f]=c.charCodeAt(f);return r?new Blob([o?d:u],{type:n}):((p=new i).append(u),p.getBlob(n))};e.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(t,e,r){var o=this;setTimeout((function(){r&&n.toDataURL&&s?t(s(o.toDataURL(e,r))):t(o.mozGetAsFile("blob",e))}))}:n.toDataURL&&s&&(n.toBlob=function(t,e,n){var r=this;setTimeout((function(){t(s(r.toDataURL(e,n)))}))})),t.exports?t.exports=s:e.dataURLtoBlob=s}(window)})),a={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,quality:.8,mimeType:"auto",convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},s="undefined"!=typeof window&&void 0!==window.document?window:{},l=Array.prototype.slice,c=/^image\/.+$/;function u(t){return c.test(t)}var d=String.fromCharCode,f=s.btoa;function p(t){var e,n=new DataView(t);try{var r,o,i;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var a=n.byteLength,s=2;s+1<a;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){o=s;break}s+=1}if(o){var l=o+10;if("Exif"===function(t,e,n){var r,o="";for(n+=e,r=e;r<n;r+=1)o+=d(t.getUint8(r));return o}(n,o+4,4)){var c=n.getUint16(l);if(((r=18761===c)||19789===c)&&42===n.getUint16(l+2,r)){var u=n.getUint32(l+4,r);u>=8&&(i=l+u)}}}if(i){var f,p,h=n.getUint16(i,r);for(p=0;p<h;p+=1)if(f=i+12*p+2,274===n.getUint16(f,r)){f+=8,e=n.getUint16(f,r),n.setUint16(f,1,r);break}}}catch(t){e=1}return e}var h=/\.\d*(?:0|9){12}\d*$/;function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return h.test(t)?Math.round(t*e)/e:t}var g=s.ArrayBuffer,m=s.FileReader,y=s.URL||s.webkitURL,b=/\.\w+$/,w=s.Compressor;return function(){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.file=t,this.image=new Image,this.options=o({},a,{},n),this.aborted=!1,this.result=null,this.init()}var r,c,h;return r=e,h=[{key:"noConflict",value:function(){return window.Compressor=w,e}},{key:"setDefaults",value:function(t){n(a,t)}}],(c=[{key:"init",value:function(){var t=this,e=this.file,r=this.options;if(o=e,"undefined"!=typeof Blob&&(o instanceof Blob||"[object Blob]"===Object.prototype.toString.call(o))){var o,i=e.type;if(u(i))if(y&&m)if(g||(r.checkOrientation=!1),y&&!r.checkOrientation)this.load({url:y.createObjectURL(e)});else{var a=new m,s=r.checkOrientation&&"image/jpeg"===i;this.reader=a,a.onload=function(r){var o=r.target.result,a={};if(s){var c=p(o);c>1||!y?(a.url=function(t,e){for(var n,r=[],o=new Uint8Array(t);o.length>0;)r.push(d.apply(null,(n=o.subarray(0,8192),Array.from?Array.from(n):l.call(n)))),o=o.subarray(8192);return"data:".concat(e,";base64,").concat(f(r.join("")))}(o,i),c>1&&n(a,function(t){var e=0,n=1,r=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:r}}(c))):a.url=y.createObjectURL(e)}else a.url=o;t.load(a)},a.onabort=function(){t.fail(new Error("Aborted to read the image with FileReader."))},a.onerror=function(){t.fail(new Error("Failed to read the image with FileReader."))},a.onloadend=function(){t.reader=null},s?a.readAsArrayBuffer(e):a.readAsDataURL(e)}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(t){var e=this,n=this.file,r=this.image;r.onload=function(){e.draw(o({},t,{naturalWidth:r.naturalWidth,naturalHeight:r.naturalHeight}))},r.onabort=function(){e.fail(new Error("Aborted to load the image."))},r.onerror=function(){e.fail(new Error("Failed to load the image."))},s.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(s.navigator.userAgent)&&(r.crossOrigin="anonymous"),r.alt=n.name,r.src=t.url}},{key:"draw",value:function(t){var e=this,n=t.naturalWidth,r=t.naturalHeight,o=t.rotate,a=void 0===o?0:o,s=t.scaleX,l=void 0===s?1:s,c=t.scaleY,d=void 0===c?1:c,f=this.file,p=this.image,h=this.options,g=document.createElement("canvas"),m=g.getContext("2d"),y=n/r,b=Math.abs(a)%180==90,w=Math.max(h.maxWidth,0)||1/0,x=Math.max(h.maxHeight,0)||1/0,k=Math.max(h.minWidth,0)||0,_=Math.max(h.minHeight,0)||0,E=Math.max(h.width,0)||n,L=Math.max(h.height,0)||r;if(b){var C=[x,w];w=C[0],x=C[1];var T=[_,k];k=T[0],_=T[1];var A=[L,E];E=A[0],L=A[1]}w<1/0&&x<1/0?x*y>w?x=w/y:w=x*y:w<1/0?x=w/y:x<1/0&&(w=x*y),k>0&&_>0?_*y>k?_=k/y:k=_*y:k>0?_=k/y:_>0&&(k=_*y),L*y>E?L=E/y:E=L*y;var S=-(E=Math.floor(v(Math.min(Math.max(E,k),w))))/2,j=-(L=Math.floor(v(Math.min(Math.max(L,_),x))))/2,O=E,N=L;if(b){var M=[L,E];E=M[0],L=M[1]}g.width=E,g.height=L,u(h.mimeType)||(h.mimeType=f.type);var P="transparent";if(f.size>h.convertSize&&"image/png"===h.mimeType&&(P="#fff",h.mimeType="image/jpeg"),m.fillStyle=P,m.fillRect(0,0,E,L),h.beforeDraw&&h.beforeDraw.call(this,m,g),!this.aborted&&(m.save(),m.translate(E/2,L/2),m.rotate(a*Math.PI/180),m.scale(l,d),m.drawImage(p,S,j,O,N),m.restore(),h.drew&&h.drew.call(this,m,g),!this.aborted)){var R=function(t){e.aborted||e.done({naturalWidth:n,naturalHeight:r,result:t})};g.toBlob?g.toBlob(R,h.mimeType,h.quality):R(i(g.toDataURL(h.mimeType,h.quality)))}}},{key:"done",value:function(t){var e,n,r=t.naturalWidth,o=t.naturalHeight,i=t.result,a=this.file,s=this.image,l=this.options;if(y&&!l.checkOrientation&&y.revokeObjectURL(s.src),i)if(l.strict&&i.size>a.size&&l.mimeType===a.type&&!(l.width>r||l.height>o||l.minWidth>r||l.minHeight>o))i=a;else{var c=new Date;i.lastModified=c.getTime(),i.lastModifiedDate=c,i.name=a.name,i.name&&i.type!==a.type&&(i.name=i.name.replace(b,(e=i.type,"jpeg"===(n=u(e)?e.substr(6):"")&&(n="jpg"),".".concat(n))))}else i=a;this.result=i,l.success&&l.success.call(this,i)}},{key:"fail",value:function(t){var e=this.options;if(!e.error)throw t;e.error.call(this,t)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}])&&t(r.prototype,c),h&&t(r,h),e}()}()},function(t,e,n){window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){var r;window,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t instanceof HTMLElement;if(!n&&"string"!=typeof t)throw new Error("{tag} is invalid value of tag");var r=n?t:document.createElement(t);for(var o in r.oldEventListener=r.addEventListener.bind(r),r.addEventListener=function(t,e,n){this.eventFunctions||(this.eventFunctions=[]),this.eventFunctions[this.eventFunctions.length]={type:t,listener:e,options:n},this.oldEventListener(t,e,n)}.bind(r),r.append=function(){for(var t=this,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return n.map((function(e){e instanceof Node&&(t.appendChild(e),e instanceof HTMLElement&&e.id&&(r[e.id]=e))})),this}.bind(r),r.get=function(t){return this.querySelector(t)}.bind(r),r.getAll=function(t){return this.querySelectorAll(t)}.bind(r),r.removeEvents=function(t){var e=this.eventFunctions;if(e)if(t){var n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;Array.isArray(t)&&t.indexOf(l.type)?this.removeEventListener(l.type,l.listener):"string"==typeof t&&l.type===t&&this.removeEventListener(l.type,l.listener)}}catch(t){o=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}}else{var c=!0,u=!1,d=void 0;try{for(var f,p=e[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var h=f.value;r.removeEventListener(h.type,h.listener)}}catch(t){u=!0,d=t}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}}.bind(r),r.destroy=function(){this.parentElement&&(this.removeEvents(),this.parentElement.removeChild(this),this.eventFunctions=null,r=null)}.bind(r),e)if(void 0!==e[o])if("child"===o){var i=e[o];r instanceof Node&&r.append(i)}else if("children"==o&&Array.isArray(e[o])){var a=e[o],s=!0,l=!1,c=void 0;try{for(var u,d=a[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value;r.append(f)}}catch(t){l=!0,c=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}}else if("attr"==o)for(var p in e[o])r.setAttribute(p,e[o][p]);else if("Object"===e[o].constructor.name)for(var h in e[o])r[o][h]=e[o][h];else r[o]=e[o];return r}n.r(e),n.d(e,"tag",(function(){return o})),o.get=function(t){var e=document.querySelector(t);return e?o(e):null},o.getAll=function(t){var e=r(document.querySelectorAll(t));return e.map((function(t){o(t)})),e},o.parse=function(t){var e=o("div");return e.innerHTML=t,1===e.childElementCount?o(e.firstElementChild):r(e.children)},o.template=function(t,e){if(e)for(var n in e)/^[a-z_][a-z0-9_\-]*$/.test(n)&&(t=t.replace(new RegExp("{{".concat(n,"}}"),"g"),e[n]));return t.replace(/{{[a-z_][a-z0-9_\-]*}}/g,"")}}]).tag},t.exports=r()},function(t,e,n){var r,o,i,a;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */a=function(t){var e=Object.prototype.toString,n=Array.isArray||function(t){return"[object Array]"===e.call(t)};function r(t){return"function"==typeof t}function o(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t,e){return null!=t&&"object"==typeof t&&e in t}var a=RegExp.prototype.test,s=/\S/;function l(t){return!function(t,e){return a.call(t,e)}(s,t)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},u=/\s*/,d=/\s+/,f=/\s*=/,p=/\s*\}/,h=/#|\^|\/|>|\{|&|=|!/;function v(t){this.string=t,this.tail=t,this.pos=0}function g(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function m(){this.cache={}}v.prototype.eos=function(){return""===this.tail},v.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},v.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},g.prototype.push=function(t){return new g(t,this)},g.prototype.lookup=function(t){var e,n,o,a=this.cache;if(a.hasOwnProperty(t))e=a[t];else{for(var s,l,c,u=this,d=!1;u;){if(t.indexOf(".")>0)for(s=u.view,l=t.split("."),c=0;null!=s&&c<l.length;)c===l.length-1&&(d=i(s,l[c])||(n=s,o=l[c],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(o))),s=s[l[c++]];else s=u.view[t],d=i(u.view,t);if(d){e=s;break}u=u.parent}a[t]=e}return r(e)&&(e=e.call(this.view)),e},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(e,r){var i=this.cache,a=e+":"+(r||t.tags).join(":"),s=i[a];return null==s&&(s=i[a]=function(e,r){if(!e)return[];var i,a,s,c=!1,g=[],m=[],y=[],b=!1,w=!1,x="",k=0;function _(){if(b&&!w)for(;y.length;)delete m[y.pop()];else y=[];b=!1,w=!1}function E(t){if("string"==typeof t&&(t=t.split(d,2)),!n(t)||2!==t.length)throw new Error("Invalid tags: "+t);i=new RegExp(o(t[0])+"\\s*"),a=new RegExp("\\s*"+o(t[1])),s=new RegExp("\\s*"+o("}"+t[1]))}E(r||t.tags);for(var L,C,T,A,S,j,O=new v(e);!O.eos();){if(L=O.pos,T=O.scanUntil(i))for(var N=0,M=T.length;N<M;++N)l(A=T.charAt(N))?(y.push(m.length),x+=A):(w=!0,c=!0,x+=" "),m.push(["text",A,L,L+1]),L+=1,"\n"===A&&(_(),x="",k=0,c=!1);if(!O.scan(i))break;if(b=!0,C=O.scan(h)||"name",O.scan(u),"="===C?(T=O.scanUntil(f),O.scan(f),O.scanUntil(a)):"{"===C?(T=O.scanUntil(s),O.scan(p),O.scanUntil(a),C="&"):T=O.scanUntil(a),!O.scan(a))throw new Error("Unclosed tag at "+O.pos);if(S=">"==C?[C,T,L,O.pos,x,k,c]:[C,T,L,O.pos],k++,m.push(S),"#"===C||"^"===C)g.push(S);else if("/"===C){if(!(j=g.pop()))throw new Error('Unopened section "'+T+'" at '+L);if(j[1]!==T)throw new Error('Unclosed section "'+j[1]+'" at '+L)}else"name"===C||"{"===C||"&"===C?w=!0:"="===C&&E(T)}if(_(),j=g.pop())throw new Error('Unclosed section "'+j[1]+'" at '+O.pos);return function(t){for(var e,n=[],r=n,o=[],i=0,a=t.length;i<a;++i)switch((e=t[i])[0]){case"#":case"^":r.push(e),o.push(e),r=e[4]=[];break;case"/":o.pop()[5]=e[2],r=o.length>0?o[o.length-1][4]:n;break;default:r.push(e)}return n}(function(t){for(var e,n,r=[],o=0,i=t.length;o<i;++o)(e=t[o])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}(m))}(e,r)),s},m.prototype.render=function(t,e,n,r){var o=this.parse(t,r),i=e instanceof g?e:new g(e);return this.renderTokens(o,i,n,t,r)},m.prototype.renderTokens=function(t,e,n,r,o){for(var i,a,s,l="",c=0,u=t.length;c<u;++c)s=void 0,"#"===(a=(i=t[c])[0])?s=this.renderSection(i,e,n,r):"^"===a?s=this.renderInverted(i,e,n,r):">"===a?s=this.renderPartial(i,e,n,o):"&"===a?s=this.unescapedValue(i,e):"name"===a?s=this.escapedValue(i,e):"text"===a&&(s=this.rawValue(i)),void 0!==s&&(l+=s);return l},m.prototype.renderSection=function(t,e,o,i){var a=this,s="",l=e.lookup(t[1]);if(l){if(n(l))for(var c=0,u=l.length;c<u;++c)s+=this.renderTokens(t[4],e.push(l[c]),o,i);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(t[4],e.push(l),o,i);else if(r(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(e.view,i.slice(t[3],t[5]),(function(t){return a.render(t,e,o)})))&&(s+=l)}else s+=this.renderTokens(t[4],e,o,i);return s}},m.prototype.renderInverted=function(t,e,r,o){var i=e.lookup(t[1]);if(!i||n(i)&&0===i.length)return this.renderTokens(t[4],e,r,o)},m.prototype.indentPartial=function(t,e,n){for(var r=e.replace(/[^ \t]/g,""),o=t.split("\n"),i=0;i<o.length;i++)o[i].length&&(i>0||!n)&&(o[i]=r+o[i]);return o.join("\n")},m.prototype.renderPartial=function(t,e,n,o){if(n){var i=r(n)?n(t[1]):n[t[1]];if(null!=i){var a=t[6],s=t[5],l=t[4],c=i;return 0==s&&l&&(c=this.indentPartial(i,l,a)),this.renderTokens(this.parse(c,o),e,n,c)}}},m.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},m.prototype.escapedValue=function(e,n){var r=n.lookup(e[1]);if(null!=r)return t.escape(r)},m.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="3.1.0",t.tags=["{{","}}"];var y=new m;return t.clearCache=function(){return y.clearCache()},t.parse=function(t,e){return y.parse(t,e)},t.render=function(t,e,r,o){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(n(i=t)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return y.render(t,e,r,o)},t.to_html=function(e,n,o,i){var a=t.render(e,n,o);if(!r(i))return a;i(a)},t.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return c[t]}))},t.Scanner=v,t.Context=g,t.Writer=m,t},e&&"string"!=typeof e.nodeName?a(e):(o=[e],void 0===(i="function"==typeof(r=a)?r.apply(e,o):r)||(t.exports=i))},function(t,e,n){var r=n(3);"string"==typeof r&&(r=[[t.i,r,""]]),n(5)(r,{insert:"head",singleton:!1}),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"#__DatePicker{position:fixed;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background-color:#93f;display:flex;flex-direction:column;color:white;box-shadow:0 0 4px 1px rgba(0,0,0,0.4);z-index:999}#__DatePicker .__titlebar{display:flex;height:40px;align-items:center;background-color:inherit}#__DatePicker .__titlebar .__title{flex:1;display:flex;justify-content:center;font-weight:600}#__DatePicker .__titlebar .__title .__year{background-color:inherit;border:none;color:white;font-size:1em}#__DatePicker .__titlebar .__title .__year option{color:black}#__DatePicker .__titlebar .__title .__month{text-transform:capitalize;margin-left:10px}#__DatePicker .__content{flex:1}#__DatePicker .__table{width:100%;height:calc(100% - 40px)}#__DatePicker .__table .__row{display:flex;align-items:center;justify-content:center}#__DatePicker .__table .__row.__head{background-color:rgba(0,0,0,0.2)}#__DatePicker .__table .__row.__head span{text-transform:capitalize;font-weight:600;font-size:0.96em}#__DatePicker .__table .__row span{display:flex;height:30px;width:30px;align-items:center;justify-content:center;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-left:5px}#__DatePicker .__table .__row span:last-child{margin-right:5px}#__DatePicker .__table .__row span.hilight{background-color:white;color:#93f;border-radius:50%}#__DatePicker button{height:40px;width:40px;border:none;background-color:inherit}#__DatePicker button svg{pointer-events:none}#__DatePicker button:focus{outline:none;background-color:rgba(0,0,0,0.2)}#__DatePicker button:active svg{transform:scale(0.9)}#__DatePicker button.disabled{opacity:0.8}.mask{position:fixed;left:0;right:0;display:block;height:100vh;width:100vw;z-index:998}\n",""])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r,o,i=t[1]||"",a=t[3];if(!a)return i;if(e&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(o," */")),l=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot).concat(t," */")}));return[i].concat(l).concat([s]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media ".concat(e[2],"{").concat(n,"}"):n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var a=0;a<t.length;a++){var s=t[a];null!=s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="(".concat(s[2],") and (").concat(n,")")),e.push(s))}},e}},function(t,e,n){"use strict";var r,o={},i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}();function a(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function s(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id],a=0;if(i){for(i.refs++;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(v(r.parts[a],e))}else{for(var s=[];a<r.parts.length;a++)s.push(v(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:s}}}}function l(t){var e=document.createElement("style");if(void 0===t.attributes.nonce){var r=n.nc;r&&(t.attributes.nonce=r)}if(Object.keys(t.attributes).forEach((function(n){e.setAttribute(n,t.attributes[n])})),"function"==typeof t.insert)t.insert(e);else{var o=i(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var c,u=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function d(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=u(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function f(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o&&t.setAttribute("media",o),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,h=0;function v(t,e){var n,r,o;if(e.singleton){var i=h++;n=p||(p=l(e)),r=d.bind(null,n,i,!1),o=d.bind(null,n,i,!0)}else n=l(e),r=f.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=a(t,e);return s(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var l=n[i],c=o[l.id];c&&(c.refs--,r.push(c))}t&&s(a(t,e),e);for(var u=0;u<r.length;u++){var d=r[u];if(0===d.refs){for(var f=0;f<d.parts.length;f++)d.parts[f]();delete o[d.id]}}}}},function(t,e,n){"use strict";n.r(e),n(2);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s='<div class="__table">\n    <div class="__row __head">\n        <span>mon</span>\n        <span>tue</span>\n        <span>wed</span>\n        <span>thu</span>\n        <span>fri</span>\n        <span>sat</span>\n        <span>sun</span>\n    </div>\n    {{#dates}}\n    <div class="__row">\n        {{#.}}\n        <span data-day="{{day}}" data-date="{{date}}">{{date}}</span>\n        {{/.}}\n    </div>\n    {{/dates}}\n</div>';e.default=function(t,e={}){if(!t)throw new Error("Activator cannot be undefined");t="string"==typeof t?o.a.get(t):o()(t);const n={onchange:()=>{},onpick:()=>{},hide:m},r=e.defaultDate?new Date(e.defaultDate):new Date,i=x(r),l=x(r);let c=i;delete l.full;const u=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],d=e.minYear||i.year,f=e.maxYear||i.year,p=o()("div",{className:"__content",onclick:function(t){const e=t.target.getAttribute("data-date"),r=t.target.getAttribute("data-day");if(e&&n.onpick){l.date=parseInt(e),l.day=r;const t=function(t,e){if((t+="").length<2)for(let e=1;e<2;++e)t="0"+t;return t}(u.indexOf(l.month)+1);n.onpick({...l,monthNumber:t}),c.copy(l),b()}}}),h=o()("div",{className:"__titlebar",onclick:function(t){const e=t.target.getAttribute("action");if(!e)return;let n=u.indexOf(l.month);switch(e){case"prev":if(0===n){if(l.year===d)return;--l.year}else l.month=u[--n];break;case"next":if(11===n){if(l.year===f)return;++l.year}else l.month=u[++n]}b()}}),v=o()("div",{id:"__DatePicker",children:[h,p]}),g=o()("span",{className:"mask",onclick:m});function m(){g.remove(),v.remove(),document.onkeydown=null}function y(){l.year=parseInt(this.value),b()}function b(){h.get(".__year").value=l.year,h.get(".__month").textContent=l.month,p.innerHTML=a.a.render(s,{dates:w(l.year,l.month)}),c.compare(l)&&p.get(`[data-date='${c.date}']`).classList.add("hilight")}function w(t,e){const n=["mon","tue","wed","thu","fri","sat","sun"],r=u.indexOf(e),o=[[],[],[],[],[],[]];let i=0;for(let a of o)for(let o=0;o<n.length;++o){const s=new Date(`${e}/${++i}/${t}`),l=s.getMonth()===r?x(s):null;if(l){const t=n.indexOf(l.day)-o;if(t)for(let e=0;e<t;++e,++o)a.push("");a.push({date:i+"",day:l.day})}else a.push("")}return""===o.slice(-1).join("").replace(/\,/g,"")&&o.pop(),o}function x(t){const e=t.toDateString().replace(/\s/g,"/").toLowerCase();if("invalid/date"===e)return;const n=e.split("/"),r={};return r.year=parseInt(n[3]),r.date=parseInt(n[2]),r.month=n[1],r.day=n[0],Object.setPrototypeOf(r,{compare:function(t){return t&&this.month===t.month&&this.year===t.year},copy:function(t){this.year=t.year,this.date=t.date,this.month=t.month,this.day=t.day}}),r}return t.addEventListener("click",(function(){const{top:t,right:e,left:n,bottom:r}=this.getBoundingClientRect();v.style.cssText=`top:${r}px;right:${innerWidth-e}px`;let o=i.year,l=i.month;const c=[];let u=d;for(;u<=f;)c.push(u++);h.innerHTML=a.a.render('<button action="prev">\n    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n        <path fill="#fff" d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z" />\n        <path fill="none" d="M0 0h24v24H0V0z" />\n    </svg>\n</button>\n<div class="__title">\n    <select class="__year">\n        {{#years}}\n        <option value={{.}}>{{.}}</option>\n        {{/years}}\n    </select>\n    <span class="__month">{{month}}</span>\n</div>\n<button action="next">\n    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n        <path fill="#fff" d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" />\n        <path fill="none" d="M0 0h24v24H0V0z" />\n    </svg>\n</button>',{defaultYear:o,years:c,month:l}),p.innerHTML=a.a.render(s,{dates:w(o,l)}),p.get(`[data-date='${i.date}']`).classList.add("hilight"),h.get(".__year").value=i.year,h.get(".__year").onchange=y,document.body.appendChild(g),document.body.appendChild(v);const b=v.getBoundingClientRect(),x=b.width-b.right,k=b.top+b.height-innerHeight;x>0&&(v.style.right=null,v.style.left=n+"px"),k>0&&(v.style.top=null,v.style.bottom=innerHeight-t+"px"),document.onkeydown=function(t){27!==t.keyCode&&27!==t.which||(t.preventDefault(),m())}})),n}}]).default},function(t,e){window.app={name:"Redeye News"}},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i='<a href="#" class="post">\r\n    <div class="post-img">\r\n        \x3c!-- <span class="post-img-blur" style="background-image: url({{thumbnail}})"></span> --\x3e\r\n        <span class="post-img-real" style="background-image: url({{thumbnail}})"></span>\r\n    </div>\r\n    <h3>{{heading}}</h3>\r\n    <div class="post-meta bar flex">\r\n        <span class="post-meta-data">{{category}} â€¢ {{date}}</span>\r\n        <div class="bar flex">\r\n            <span class="post-meta-data flex">\r\n                <i class="icon thumb_up_alt"></i>\r\n                <span class="data-likes">{{likes}}</span>\r\n            </span>\r\n            <span class="post-meta-data flex">\r\n                <i class="icon remove_red_eyevisibility"></i>\r\n                <span class="data-views">{{views}}</span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="actions bar flex action-bar">\r\n        <i action="whatsapp" class="icon whatsapp"></i>\r\n        <i action="facebook" class="icon facebook"></i>\r\n        <i action="twitter" class="icon twitter"></i>\r\n        <i action="gmail" class="icon gmail"></i>\r\n    </div>\r\n</a>',a=n(1),s=n.n(a);var l=function(t){var e=function(){if(XMLHttpRequest)return new XMLHttpRequest;if(ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP")}(),n=void 0===t.response||t.response;return new Promise((function(o,i){var a=(t=t||{}).contentType||"application/x-www-form-urlencoded",s=void 0===t.method?"get":t.method,l=t.url;t.responseType=void 0===t.responseType?"json":t.responseType,t.serialize=void 0===t.serialize||t.serialize,t.onsuccess=t.onsuccess||r,t.onload=t.onload||r,t.onerror=t.onerror||r;var c=t.data&&function(t){var e=Object.keys(t),n="";return e.map((function(r,o){n+=r+(t[r]?"="+t[r]:"")+(o<e.length-1?"&":"")})),encodeURI(n)}(t.data);t.data&&"application/json"===a&&(c=JSON.stringify(t.data)),e.open(s,l,!0),t.xhr&&t.xhr(e),e.responseType=t.responseType,e.setRequestHeader("Content-Type",a),e.send(c),t.onloadend&&e.addEventListener("loadend",t.onloadend),t.onload&&e.addEventListener("load",t.onload),t.onerror&&e.addEventListener("error",t.onerror),e.addEventListener("readystatechange",(function(){4===e.readyState&&(e.status>=200&&e.status<300||0===e.status?(t.onsuccess&&t.onsuccess(e.response),o(n?e.response:e)):i(n?e.response:e))}))}));function r(t){return t}},c=n(2),u=n.n(c);var d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o()(t.type||"li",{className:"tile"}),n="string"==typeof t.text?o()("span",{textContent:t.text||""}):t.text,r=t.lead||o()("span",{className:"lead"}),i=t.tail||o()("span",{className:"tail"});return t.subText&&(n.setAttribute("data-subtext",t.subText),n.classList.add("sub-text")),e.append(r,n,i),e.text=function(t){n.textContent=t},e.subText=function(t){t?(n.setAttribute("data-subtext",t),n.classList.add("sub-text")):n.classList.remove("sub-text")},e.lead=function(t){e.replaceChild(t,e.firstChild)},e.tail=function(t){e.replaceChild(t,e.lastChild)},e.appendText=function(t){n.textContent+=t},e};var f={prompt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return"number"===n&&(n="numeric"),e||(e=""),new Promise((function(i,a){var s="text"===n?"textarea":"input";n="filename"===n?"text":n;var l=o()("span",{textContent:t,className:"message"}),c=o()(s,{value:e,className:"input"}),d=o()("button",{type:"submit",textContent:"ok",disabled:!e,onclick:function(){!r.required||c.value?(g(),i(c.value)):p.textContent="This field is required"}}),f=o()("button",{textContent:"cancel",type:"button",onclick:function(){g(),r.reject&&a()}}),p=o()("span",{className:"error-msg"}),h=o()("form",{action:"#",className:"prompt",onsubmit:function(t){t.preventDefault(),d.disabled||i(c.value)},children:[l,c,p,o()("div",{className:"button-container",children:[f,d]})]}),v=o()("span",{className:"mask"});function g(){h.classList.add("hide"),setTimeout((function(){document.body.removeChild(h),document.body.removeChild(v)}),300)}"textarea"===s?(c.rows=1,c.inputMode=n):c.type=n,c.oninput=function(){r.match&&!r.match.test(this.value)?(d.disabled=!0,p.textContent="Not a valid input"):(d.disabled=!1,p.textContent="")},c.onfocus=function(){this.select()},document.body.append(h,v),c.focus(),u()(c)}))},alert:function(t,e){!e&&t&&(e=t,t="");var n=/(https?:\/\/)?((www[^\.]?)\.)?([\w\d]+)\.([a-zA-Z]{2,8})(\/[^ ]*)?/;if(n.test(e)){var r=n.exec(e);e=e.replace(r[0],"<a href='".concat(r[0],"'>").concat(r[0],"</a>"))}var i=o()("strong",{className:"title",textContent:t}),a=o()("span",{className:"message",innerHTML:e}),s=o()("button",{textContent:"ok",onclick:function(){l.classList.add("hide"),setTimeout((function(){document.body.removeChild(l),document.body.removeChild(c)}),300)}}),l=o()("div",{className:"prompt",children:[i,a,o()("div",{className:"button-container",child:s})]}),c=o()("span",{className:"mask"});document.body.append(l,c)},confirm:function(t,e){return new Promise((function(n){!e&&t&&(e=t,t="");var r=o()("strong",{className:"title",textContent:t}),i=o()("span",{className:"message",textContent:e}),a=o()("button",{textContent:"ok",onclick:function(){u(),n()}}),s=o()("button",{textContent:"cancel",onclick:u}),l=o()("div",{className:"prompt",children:[r,i,o()("div",{className:"button-container",children:[s,a]})]}),c=o()("span",{className:"mask"});function u(){l.classList.add("hide"),setTimeout((function(){document.body.removeChild(l),document.body.removeChild(c)}),300)}document.body.append(l,c)}))},select:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r){var i=o()("strong",{className:"title",textContent:t}),a=o()("ul"),s=o()("div",{className:"prompt select",children:[i,a]}),l=o()("span",{className:"mask",onclick:c});function c(){s.classList.add("hide"),setTimeout((function(){document.body.removeChild(s),document.body.removeChild(l)}),300)}e.map((function(t){var e=t,i=t,s=null;Array.isArray(t)&&(e=t[0],i=t[1],t.length>2&&(s=o()("i",{className:"icon ".concat(t[2])}))),i=i.toString();var l=d({lead:s,text:i});n.default===e&&(l.classList.add("selected"),setTimeout((function(){l.scrollIntoView()}),10)),l.onclick=function(){c(),r(e)},a.append(l)})),document.body.append(s,l)}))}},p=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o()("i",{className:"icon clearclose",onclick:l}),i=o()("span",{className:"text",textContent:t}),a=o()("div",{className:"toast "+(n.type||""),children:[i,r]});n.progressbar&&(a.classList.add("progress"),e=o()("span",{className:"bar"}),a.append(e));if(toastContainer.appendChild(a),!n.progressbar){var s=n.time||3e3;setTimeout((function(){l()}),s)}function l(){a.classList.add("hide"),setTimeout((function(){a.remove()}),300)}return{hide:l,updateProgress:function(t,n){e.style.width=Math.ceil(t)+"%",i.textContent=n}}};var h='<h2 class="post-title">{{title}}</h2>\r\n<div id="readpost">{{post}}</div>\r\n<div class="post-actions">\r\n    <div class="flex bar">\r\n        <div class="lead flex">\r\n            <button action="like" id="like_post" class="icon thumb_up_off_alt"></button>\r\n            <span id="likes">{{likes}}</span>\r\n            <i class="icon remove_red_eyevisibility"></i>\r\n            <span id="views">{{views}}</span>\r\n        </div>\r\n        <div class="tail flex">\r\n            <i action="whatsapp" class="icon whatsapp"></i>\r\n            <i action="facebook" class="icon facebook"></i>\r\n            <i action="twitter" class="icon twitter"></i>\r\n            <i action="gmail" class="icon gmail"></i>\r\n        </div>\r\n    </div>\r\n</div>';var v=function(t,e){var n=o()("span",{className:"title-text",textContent:t}),r=e.lead||o()("i",{className:"lead icon arrow_back_ios"}),i=e.tail||o()("i",{className:"tail icon"}),a=o()("div",{className:"bar flex title",children:[r,n,i]});return a.setTitle=function(t){n.textContent=t},a.setLead=function(t){a.replaceChild(t,r),r=t},a.setTail=function(t){a.replaceChild(t,i),i=i},a};var g=function(t){document.title=t;var e=v(t,{lead:o()("i",{className:"lead icon arrow_back_ios",onclick:function(){if(1===history.length)return setLocation("/");history.back()}})}),n=o()("div",{className:"container"}),r=o()("div",{className:"page",children:[e,n]});return r.beforeHide=null,r.show=function(){main.style.display="none",document.body.appendChild(r)},r.hide=function(){r.beforeHide&&r.beforeHide(),main.style.display=null,r.classList.add("hide"),setTimeout((function(){r.remove()}),300)},r.setTitle=e.setTitle,r.container=n,r.append=n.append,r},m=function(t,e,n){switch(t){case"share":navigator.share({title:n,text:"read more about this article on AmWeb News",url:e}).then((function(){return console.log("shared")})).catch((function(t){return console.log(t)}));break;case"facebook":y("https://www.facebook.com/sharer/sharer.php?kid_directed_site=0&sdk=joey&quote=".concat(n,"&u=").concat(e,"&ref=plugin&src=share_button"),400,600);break;case"whatsapp":y("whatsapp://send?text=".concat(encodeURI(n+"\n"+e)),400,400);break;case"twitter":y("https://twitter.com/intent/tweet?text=".concat(encodeURI(n+"\n"+e)),400,600);break;case"gmail":y("mailto:?subject=".concat(encodeURI(n),"&body=").concat(encodeURI(n+"\n"+e)),400,500)}};function y(t,e,n){var r=window.top.outerHeight/2+window.top.screenY-n/2,o=window.top.outerWidth/2+window.top.screenX-e/2;return window.open(t,"AmWeb News","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+e+", height="+n+", top="+r+", left="+o)}function b(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var w=function(t){if(!t)return;var e=g(app.name);return e.show(),loader.className="sec p",l({url:"/post/".concat(t)}).then((function(t){if(t.err)return p(t.err);var n=s.a.render(h,{title:t.title,views:t.views,likes:t.likes});o.a.parse(n).map((function(n){"readpost"===n.id&&(n.innerHTML=t.body,b(n.querySelectorAll("img")).map((function(e){var n=e.getAttribute("data-src");e.src="/img/".concat(t.post_id,"/").concat(n)})));e.append(n)})),e.get(".post-actions").addEventListener("click",(function(e){x.bind(this)(e,t)})),loader.className="hide"})).catch((function(t){console.log(t),p(t="string"==typeof t?t:"Unable to get the post")})),e};function x(t,e){var n=t.target.getAttribute("action");if(n){if("like"===n)return void l({url:"/like",method:"post",contentType:"application/json",data:{post_id:e.post_id}}).then((function(e){"error"!==e.status&&t.target.classList.add("thumb_up")})).catch((function(t){console.log(t)}));var r="".concat(location.origin,"/").concat(e.post_id),o=e.title;m(n,r,o)}}var k=function(t){var e,n,r="/recents";if(t&&1===t.length)return w(t[0]);t&&2===t.length?(e=t[0],n=t[1],main.textContent="",o.a.get("#title").textContent=decodeURI(n)):o.a.get("#title").textContent=app.name;var i=o.a.get("#load-feeds");navigator.onLine?(loader.className="sec",e&&n&&(r+="/"+e+"/"+n),l({url:r}).then((function(t){localStorage.setItem("feeds",JSON.stringify(t)),Array.isArray(t)&&(_(t),t.length>=10?(i.style.display=null,i.onclick=function(t){T.bind(this)(t,r,10)}):i.style.display="none"),setTimeout((function(){loader.className="hide"}),100)})).catch((function(t){console.log(t)}))):localStorage.feeds?_(JSON.parse(localStorage.feeds)):f.alert("ERROR","you are offline")};function _(t,e){var n="admin"===cookies().user;return e||(t=t.reverse()),t.map((function(t){var r,a=document.getElementById(t.post_id);if(a)return a.querySelector(".data-likes").textContent=t.likes,void(a.querySelector(".data-views").textContent=t.views);var l=s.a.render(i,{thumbnail:t.thumbnail,heading:t.title,category:t.category,likes:t.likes,views:t.views,date:new Date(t.date).toDateString()}),c=t.post_id,u=o.a.parse(l);u.href="/".concat(c),u.id=c;var d=[];if(n){var f=o()("i",{className:"icon delete",attr:{action:"delete"}}),p=o()("i",{className:"icon redo",attr:{action:"moveTo"}});d.push(f,p)}if(navigator.share){var h=o()("i",{className:"icon share",attr:{action:"share"}});d.push(h)}d.length>0&&(r=u.querySelector(".actions")).append.apply(r,d),u.addEventListener("click",(function(e){E.bind(this)(e,t)})),e?main.append(u):main.insertBefore(u,main.firstChild)})),[]}function E(t,e){var n=this;t.preventDefault();var r=t.target.getAttribute("action"),o=e.post_id,i=e.title;switch(r){case"delete":f.confirm("Delete this post?").then((function(){L.bind(n)("/post/".concat(o))}));break;case"moveTo":C.bind(this)("/post/".concat(o));break;case"share":case"facebook":case"whatsapp":case"twitter":case"gmail":m(r,this.href,i);break;default:setLocation(this.href)}}function L(t){var e=this;l({url:t,method:"delete"}).then((function(t){"ok"===t.status?(e.remove(),p(t.msg)):"LOGIN_ERR"===t.errorCode?f.alert("ERROR","Please login to delete this post"):p(t.msg,{type:"error"})})).catch((function(t){console.log(t),p(t="string"==typeof t?t:"Post could not be delete, please try again later",{type:"error"})}))}function C(t){var e=o.a.getAll("[action='filter post'"),n=[];e.map((function(t){n.push(t.textContent)})),f.select("Move to category: ",n).then((function(e){l({url:t,contentType:"application/json",method:"put",data:{moveTo:e}}).then((function(t){"ok"===t.status?p(t.msg):p(t.msg,{type:"error"})})).catch((function(t){console.log(err),p("Something went wrong",{type:"error"})}))}))}function T(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,o=parseInt(this.getAttribute("data-page"))+1;l({url:e+"?page="+o}).then((function(t){Array.isArray(t)&&(n.setAttribute("data-page",o),t.length<r&&(n.style.display="none"),_(t,!0))})).catch((function(t){console.log(t)}))}var A='<nav class="page-navigation">\r\n    <a href="admin/post">new post</a>\r\n    <a href="admin/categories">categories</a>\r\n    <a href="#" id="logout">logout</a>\r\n</nav>',S='<form action="#" id="post">\r\n    <div class="title">Add a new post</div>\r\n    <div class="form-group bar flex">\r\n        <select name="category" id="category">\r\n            {{#category}}\r\n            <option value="{{category}}">{{category}}</option>\r\n            {{/category}}\r\n        </select>\r\n        <button type="button" id="addcategory">new category</button>\r\n    </div>\r\n\r\n    <textarea name="title" id="title" rows="1" placeholder="post title" required></textarea>\r\n    <div id="post-body">\r\n        <div class="tools bar flex">\r\n            <div class="group">\r\n                <i action="undo" class="icon undo"></i>\r\n                <i action="redo" class="icon redo"></i>\r\n            </div>\r\n\r\n            <label action="insertImage" class="icon insert_photoimagephoto">\r\n                <input type="file" name="image" id="image" accept="image/png, image/gif, image/jpeg" hidden>\r\n            </label>\r\n\r\n            <div class="group">\r\n                <i action="insertOrderedList" class="icon format_list_numbered"></i>\r\n                <i action="insertUnorderedList" class="icon format_list_bulleted"></i>\r\n            </div>\r\n\r\n            <i action="bold" class="icon format_bold"></i>\r\n            <i action="italic" class="icon format_italic"></i>\r\n            <i action="underline" class="icon format_underlined"></i>\r\n            <i action="strikeThrough" class="icon strikethrough_s"></i>\r\n\r\n            <i action="embed" class="icon code"></i>\r\n            <i action="createLink" class="icon linkinsert_link"></i>\r\n            <i action="unlink" class="icon link_off"></i>\r\n            <i action="formatBlock" class="icon format_quote"></i>\r\n\r\n            <i action="justifyCenter" class="icon format_align_center"></i>\r\n            <i action="justifyFull" class="icon format_align_justify"></i>\r\n            <i action="justifyLeft" class="icon format_align_left"></i>\r\n            <i action="justifyRight" class="icon format_align_right"></i>\r\n\r\n            <label class="icon format_color_fill">\r\n                <input type="color" name="bgColor" id="bgColor" hidden>\r\n            </label>\r\n            <label class="icon format_color_text">\r\n                <input type="color" name="fontColor" id="fontColor" hidden>\r\n            </label>\r\n            <i action="fontSize" class="icon format_size" data-val="3"></i>\r\n\r\n\r\n            <i action="removeFormat" class="icon loopsync"></i>\r\n        </div>\r\n        <div id="description" contenteditable="true"></div>\r\n    </div>\r\n    <div class="button-container">\r\n        <button type="submit">submit</button>\r\n    </div>\r\n</form>',j=n(3),O=n.n(j);function N(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var M=function(t){t.querySelector(".tools").addEventListener("click",(function(t){var o=t.target.getAttribute("action");if(!o)return;if(!["embed","hiliteColor","createLink","fontSize","formatBlock","foreColor","quote","insertImage","removeFormat"].includes(o))return P(o);var i=R();switch(o){case"foreColor":P(o,n.value);break;case"hiliteColor":P(o,r.value);break;case"fontSize":var a=t.target.getAttribute("data-val");f.select("Select font size",[1,2,3,4,5,6,7],{default:a}).then((function(t){P(o,parseInt(t))}));break;case"formatBlock":var s=R().element,l="aside";"ASIDE"===s.tagName&&(l="div"),P(o,l);break;case"createLink":var c=document.createRange(),u=i.sel;c.setStart(i.startNode,i.start),c.setEnd(i.endNode,i.end),f.prompt("Enter link: ",null,"text",{match:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,required:!0,reject:!0}).then((function(t){u.removeAllRanges(),u.addRange(c),e.focus(),P(o,t)})).catch((function(t){t&&console.log(t),u.removeAllRanges(),u.addRange(c),e.focus()}));break;case"embed":!function(t,e){f.prompt("Enter code: ",null,"text",{required:!0}).then((function(n){t.focus();var r=document.createRange(),o=e.sel;r.setStart(e.node,e.start),o.removeAllRanges(),o.addRange(r),n&&P("insertHTML",n)}))}(e,i);break;case"removeFormat":e.focus(),P(o)&&(n.parentElement.style.color=null,r.parentElement.style.color=null,fontSize.value=3)}}));var e=t.get("#description"),n=t.get("#fontColor"),r=t.get("#bgColor");function o(){e.focus(),this.parentElement.style.color=this.value,P("hiliteColor",this.value)}function i(){e.focus(),this.parentElement.style.color=this.value,P("foreColor",this.value)}t.get("#image").addEventListener("change",(function(){e.focus(),D.call(this)})),n.addEventListener("change",i),n.parentElement.addEventListener("click",i.bind(n)),r.addEventListener("change",o),r.parentElement.addEventListener("click",o.bind(r)),e.addEventListener("paste",(function(t){t.preventDefault();var e=t.clipboardData.getData("text/html"),n=t.clipboardData.getData("text/plain");e&&n?f.select("Paste as",["text","html"]).then((function(t){"html"===t?P("insertHTML",e):P("insertText",n)})):P("insertText",n)})),e.addEventListener("drop",(function(t){var e=t.dataTransfer;if(e.files){if(e.files.length>1)return void f.alert("ALERT","Only one file allowed at a time");t.preventDefault(),D.call({files:e.files})}})),e.addEventListener("input",U)};function P(t,e){var n=e?document.execCommand(t,!1,e):document.execCommand(t,!1);return n||console.log("Command status %c".concat(t).concat(e?":"+e:""),"font-weight:bold",n),n}function R(){var t=window.getSelection(),e=t.getRangeAt(0),n=t.toString(),r=t.anchorNode,o=t.focusNode,i=o;return{start:e.startOffset,end:e.endOffset,text:n,element:e.endContainer.parentElement,node:o,sel:t,startNode:r,endNode:i}}function U(t){if("insertText"!==t.inputType||null===t.data){var e=N(this.children),n=0;e.map((function(t){if("ASIDE"===t.tagName){t.removeAttribute("class");var e=t.nextElementSibling,r=!e;1==++n&&(t.classList.add("first"),n=1),(r||"ASIDE"!==e.tagName)&&(t.classList.add("last"),n=0)}}))}}function D(){var t=this.files[0];t&&new O.a(t,{quality:.1,success:function(e){var n=new FileReader;n.onloadend=function(e){var n=e.target.result;"image"===n.split(";")[0].split(":")[1].split("/")[0]&&P("insertHTML","<img src='".concat(n,"' style='max-width: 100%' alt='").concat(t.name,"'>"))},n.readAsDataURL(e)}})}function z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.appendChild(o()("option",{value:n||e,textContent:e}))}function H(t,e){var n=this;f.prompt("Enter category name: ").then((function(t){if(t){var r={category:t};n.classList.add("loading"),l({url:"/category",method:"post",contentType:"application/json",data:r,onloadend:function(){n.classList.remove("loading")}}).then((function(t){var n={type:""};"ok"!==t.status?n.type="error":z(e,r.category),p(t.msg,n)})).catch((function(t){p("string"==typeof t?t:"Something went wrong",{type:"error"}),console.log(t)}))}}))}function I(t,e,n){t.preventDefault();var r=t.target.querySelector("button[type=submit]");r.classList.add("loading");var i={category:null,title:null,body:null,images:[]},a=e.get("#description"),s=e.get("#title");i.category=n.value,i.title=s.value;var c=function(t){for(var e=(t=o.a.parse(t.outerHTML)).querySelectorAll("img"),n={},r=0;r<e.length;++r){var i="image_".concat(r);n[i]=e[r].src,e[r].src="",e[r].setAttribute("data-src",i)}if(0===Object.keys(n).length)for(var a=/^https:\/\/(www\.)?youtube\.com\/(embed\/|watch\?v=)(.+)/,s=t.querySelectorAll("iframe"),l=0;l<s.length;++l){var c=s[l].src,u=a.exec(c);if(u){n.youtube="https://img.youtube.com/vi/".concat(u[3],"/0.jpg");break}}return{body:t.innerHTML,images:n}}(a);i.images=c.images,i.body=c.body;var u=p("Uploading your post",{progressbar:!0});l({url:"/post",method:"post",xhr:function(t){t.onloadstart=function(t){u.updateProgress(0,"Uploading...")},t.upload.onprogress=function(t){var e=Math.ceil(t.loaded/t.total*100);e=e>100?100:e,u.updateProgress(e,"".concat(e,"% uploaded"))},t.onload=function(t){u.updateProgress(100,"file saved"),u.hide(),localStorage.removeItem("draft")},t.onloadend=function(){r.classList.remove("loading")}},contentType:"application/json",data:i}).then((function(t){"ok"===t.status?(a.textContent="",s.value="",p(t.msg)):"error"===t.status&&("LOGIN_ERR"===t.errorCode&&(location.href="/login"),f.alert("ERROR",t.msg))})).catch((function(t){console.log(t),p("unable to save post, image may be too large.")}))}var B='<div class="list manage-category">\n    {{#.}}\n    <div class="bar flex list-item">\n        <input type="text" value="{{.}}">\n        <button action="delete" data-category="{{.}}" class="icon delete"></button>\n    </div>\n    {{/.}}\n</div>';function F(t){if("delete"===t.target.getAttribute("action")){var e=t.target.getAttribute("data-category");f.confirm("ALERT","Your all posts from ".concat(e," will be delete! Delete any way?")).then((function(){l({url:"/category/"+e,method:"delete"}).then((function(e){"ok"===e.status?(t.target.parentElement.remove(),p("Category deleted",{type:"success"})):p(e.msg,{type:"error"})})).catch((function(t){console.log(t),p("string"==typeof t?t:"Something not right, please try again later")}))}))}}var q={post:function(){var t,e,n=["loading..."],r=g("".concat(app.name," - admin"));return r.beforeHide=function(){if(e){var t=e.get("#description").innerHTML,n=e.get("#title").value,r=e.get("#category").value;if(!t&&!n)return;localStorage.setItem("draft",JSON.stringify({body:t,title:n,category:r})),p("saved as draft")}},function(){var i={category:n},a=s.a.render(S,i);e=o.a.parse(a),r.append(e),M(e),t=e.get("#category");var l=e.get("#addcategory");u()(e.get("#title")),l.onclick=function(e){H.bind(this)(e,t)},e.onsubmit=function(n){I.bind(this)(n,e,t)}}(),l({url:"/category",response:!0}).then((function(r){if(Array.isArray(r)){if(n=r,t&&(t.textContent="",n.map((function(e){z(t,e)})),localStorage.draft)){var o=JSON.parse(localStorage.draft);e.get("#description").innerHTML=o.body,e.get("#title").value=o.title,e.get("#category").value=o.category}}else f.alert("ERROR","Something went wrong, please try again");setTimeout((function(){loader.classList.add("hide")}),1e3)})).catch((function(t){console.log(t),"string"!=typeof t&&(t="Something is not right"),alert(t)||(location.href="/")})),r.show(),r},categories:function(){var t=g(app.name+" - manage categories"),e="Something is not right, please try again later";t.show(),loader.className="sec p",l({url:"/category",onloadend:function(){loader.className="hide"}}).then((function(n){if(Array.isArray(n)){var r=s.a.render(B,n),i=o.a.parse(r);i.onclick=F,t.append(i)}else"error"===n.status&&p(n.msg||e,{type:"error"})})).catch((function(t){console.log(t),p("string"==typeof t?t:e,{type:"error"})}))}};function W(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var $='<form id="login" action="#" method="post">\r\n    <div class="bar flex title">\r\n        <i class="icon logo"></i>\r\n        <h3 id="account-title">Redeye News</h3>\r\n    </div>\r\n    <div class="inputs">\r\n        <input type="text" name="autofill-detector" id="autoFillDetector">\r\n        <label data-placeholder="email">\r\n            <input type="text" id="email">\r\n        </label>\r\n        <label data-placeholder="password">\r\n            <input type="password" id="password">\r\n        </label>\r\n    </div>\r\n    <span id="error"></span>\r\n    <div class="button-container">\r\n        <button type="submit">submit</button>\r\n    </div>\r\n</form>',V=function(){var t=(location.search||"").substr(1);if(!t)return null;var e={};return t.split("&").map((function(t){t=t.split("="),e[t[0]]=t[1]})),e};var X={home:k,admin:function t(e,n){if(e&&Array.isArray(e))return t(e.pop(),n);if("string"==typeof e&&e in q)return n&&n.hide(),q[e]();var r=g(app.name+" - admin");r.show();var i=o.a.parse(A);var a=W(i.children);a.map((function(t){t.onclick=function(t){t.preventDefault(),"logout"!==this.id?setLocation(this.href):l({url:"/logout",method:"post"}).then((function(){location.reload()}))}}));r.append(i);setTimeout((function(){loader.classList.add("hide")}),1e3);return r},account:function(t){var e="login"===t?"Login":"Create account",n=g(app.name+"- "+e);n.show();var r=o.a.parse($),i=r.get("#autoFillDetector"),a=r.get("#email"),s=r.get("#password"),c=r.get("#error"),u=r.get("button[type=submit]");return r.get("#account-title").textContent=e,n.append(r),a.onfocus=s.onfocus=d,r.onsubmit=function(e){e.preventDefault(),u.classList.add("loading"),c.textContent="";var n=!0;if(""===a.value&&(a.parentElement.classList.remove("warning"),setTimeout((function(){a.parentElement.classList.add("warning")}),0),n=!1,c.textContent="Username is required"),""===s.value&&(s.parentElement.classList.remove("warning"),setTimeout((function(){s.parentElement.classList.add("warning")}),0),n&&(c.textContent="Password is required"),n=!1),n){var r={email:a.value,password:s.value};l({url:"/"+t,method:"post",contentType:"application/json",data:r,onloadend:function(){u.classList.remove("loading")}}).then((function(e){if("ok"!==e.status)c.textContent=e.msg;else{var n=V().redirect;"login"===t?(p("login success",{type:"success"}),"admin"===e.loginType?location.replace("/admin"):location.replace(n||"/")):(p("New account created!"),location.replace("/login"+(n?"?"+n:"")))}})).catch((function(t){console.log(t),c.textContent="string"==typeof t?t:"Something went worng, please try again later"}))}},setTimeout((function(){var t=window.getComputedStyle(i).backgroundColor,e=window.getComputedStyle(a,":-webkit-autofill"),n=window.getComputedStyle(a,":-webkit-autofill");e.backgroundColor!==t&&a.parentElement.classList.add("focus"),n.backgroundColor!==t&&s.parentElement.classList.add("focus")}),100),setTimeout((function(){loader.classList.add("hide")}),1e3),n;function d(){this.parentElement.className="focus",this.onblur=f,c.textContent=""}function f(){""===this.value?this.parentElement.className=null:(this.onfocus=null,this.onfocus=d)}}},Y=(n(5),n(4)),J=n.n(Y);function G(){window.main=o.a.get("main");var t=null,e=o.a.get("#sidenavToggler"),n=o.a.get("header nav"),r=o()("span",{className:"mask",onclick:s,style:{zIndex:"0"}}),i=J()("#datepicker");function a(){var e=location.pathname.substr(1).split("/"),n=t;if(["login","newaccount"].indexOf(e[0])>-1)t=X.account(e[0]);else if(e[0]in X){var r=e.slice(1),o=r.length?r:void 0;t=X[e[0]](o,t)}else t=X.home(e[0]?e:null);n&&n.hide()}function s(){n.visible?l():(n.parentElement.insertBefore(r,n),n.classList.add("show"),n.visible=!0)}function l(){n.visible&&(r.remove(),n.classList.remove("show"),n.visible=!1)}i.onpick=function(t){Z("/date/".concat(t.year,"-").concat(t.monthNumber,"-").concat(t.date)),l(),i.hide()},e.onclick=s,n.onclick=function(t){l(),Q.call(this,t)},window.addEventListener("locationchange",a),a()}function K(){if(!document.cookie)return{};var t=document.cookie.split(";"),e={};return t.map((function(t){t=t.split("="),e[t[0].trim()]=t[1].trim(),0})),e}function Z(t){history.pushState(null,null,t);var e=new CustomEvent("locationchange");window.dispatchEvent(e)}function Q(t){"filter post"===t.target.getAttribute("action")&&(t.preventDefault(),Z(t.target.href))}!function(){window.addEventListener("popstate",(function(t){t.preventDefault();var e=new CustomEvent("locationchange");window.dispatchEvent(e)})),window.cookies=K,window.setLocation=Z,"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js",{scope:"/"}).then((function(t){console.log("Registration successful, scope is:",t.scope)})).catch((function(t){console.log("Service worker registration failed, error:",t)}));window.addEventListener("load",G)}()}]);